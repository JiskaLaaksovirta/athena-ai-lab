{% extends 'partials/base.html' %}

{% block title %}Opiskelijan kojelauta{% endblock %}

{% block content %}
  <section class="assignments">
    <h2>Omat tehtäväsi</h2>

    {% for assignment in assignments %}
      <article class="card">
        <h3>{{ assignment.material.title }}</h3>
        <p class="muted">Opettaja: {{ assignment.assigned_by.get_full_name|default:assignment.assigned_by.username }}</p>
        <p class="muted">Tila: {{ assignment.get_status_display }}</p>
        {% if assignment.due_at %}
            <p class="muted">Määräaika: {{ assignment.due_at|date:"d.m.Y H:i" }}</p>
        {% endif %}
        
        <!-- This link will be for the next step: viewing and completing the assignment -->
        <div style="margin-top: 10px;">
            <a class="btn primary" href="#">Aloita tai jatka tehtävää</a>
        </div>
      </article>
    {% empty %}
      <p class="muted">Sinulla ei ole vielä tehtäviä.</p>
    {% endfor %}
  </section>
{% endblock %}```

**Reminder:** For this student dashboard to work, you must ensure your `dashboard_view` in `materials/views.py` is sending the correct data. Here is the logic for the student part of that view:

```python
# In materials/views.py, inside the dashboard_view function

# ...
elif user.role == 'STUDENT':
    # Students see a list of their assignments.
    # We use select_related to efficiently fetch the related material and teacher info in one database query.
    assignments = Assignment.objects.filter(student=user).select_related('material', 'assigned_by')
    return render(request, 'materials/student_dashboard.html', {'assignments': assignments})
#...