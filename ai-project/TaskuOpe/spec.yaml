name: taskuope # Voit vaihtaa tämän, jos haluat

region: fra

services:
- name: web
  github:
    repo: JiskaLaaksovirta/athena-ai-lab
    branch: main
  source_dir: ai-project/TaskuOpe
  
  build_command: |
    pip install -r requirements.txt
    python manage.py collectstatic --no-input
    python manage.py migrate
  run_command: gunicorn TaskuOpe.wsgi

  envs:
  - key: DEBUG
    value: "False"
  - key: ALLOWED_HOSTS
    value: "${APP_URL}"

  - key: SECRET_KEY
    value: "${SECRET_KEY}"
    scope: RUN_AND_BUILD_TIME # Tarvitaan 'collectstatic'-komentoa varten
    
  - key: DO_SPACES_ACCESS_KEY
    value: "${DO_SPACES_ACCESS_KEY}"
    scope: RUN_AND_BUILD_TIME
    
  - key: DO_SPACES_SECRET_KEY
    value: "${DO_SPACES_SECRET_KEY}"
    scope: RUN_AND_BUILD_TIME
    
  - key: DO_SPACES_BUCKET_NAME
    value: "${DO_SPACES_BUCKET_NAME}"
    scope: RUN_AND_BUILD_TIME
    
  - key: DO_SPACES_REGION
    value: "${DO_SPACES_REGION}"
    scope: RUN_AND_BUILD_TIME
    
  - key: OPENAI_API_KEY
    value: "${OPENAI_API_KEY}"
    scope: RUN_AND_BUILD_TIME
databases:
- name: db
  engine: PG # TÄMÄ ON TÄRKEÄ KOHTA. Vain "PG". Ei mitään muuta.

